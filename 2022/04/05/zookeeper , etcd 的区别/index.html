<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="yejf"><link rel="icon" href="/avatar.jpg"><title>zookeeper / etcd 的区别</title><meta name="description" content="Loneliness is not the same as loneliness, loneliness will panic, loneliness is full."><link rel="alternate" type="application/rss+xml" title="YeJF的篝火" href="/atom.xml"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/styles/kimbie-dark.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><script src="https://hm.baidu.com/hm.js?5be0398a8708180d8b755eb54268fe15"> </script><meta name="generator" content="Hexo 5.4.2"></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#main-navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">YeJF的篝火</a></div><div class="collapse navbar-collapse" id="main-navbar"><ul class="nav navbar-nav navbar-right"><li><form class="site-search-form"><i class="fa fa-search icon" aria-hidden="true"></i><input class="local-search-input-cls" type="text" id="local-search-input"></form><div class="local-search-result-cls" id="local-search-result"></div></li><li><a href="/archives">Archive</a></li><li><a target="_blank" rel="noopener" href="https://donnieYeh.github.io/">Github</a></li><li><a href="/about/">About</a></li><li><a href="/tags/">Tags</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img class="avatar-img" src="/avatar.jpg"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>zookeeper / etcd 的区别</h1><p class="post-meta">Posted on 4月 5 2022<span class="post-meta-group"><span class="with-love"> <i class="fa fa-keyboard-o"></i></span><span class="post-meta-item-text">  文章字数: </span><span class="post-count">648</span><span class="post-meta-item-text">字</span></span><span class="post-meta-group"><span class="with-love"> <i class="fa fa-hourglass-half"></i></span><span class="post-meta-item-text">  阅读时长: </span><span class="post-count">2</span><span class="post-meta-item-text">min</span></span><span class="post-meta-group"><span id="busuanzi_container_page_pv"> <span class="with-love"> <i class="fa fa-eye"> </i></span><span>阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></span><span class="post-meta-group"><span class="with-love"> <i class="fa fa-tag"></i></span> · <a class="tag post-meta" href="/tags/zookeeper/">zookeeper</a> · <a class="tag post-meta" href="/tags/etcd/">etcd</a></span></p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article class="blog-post" role="main"><h1 id="zookeeper-etcd-的区别"><a href="#zookeeper-etcd-的区别" class="headerlink" title="zookeeper / etcd 的区别"></a>zookeeper / etcd 的区别</h1><p>etcd，分布式一致性键值存储引擎，专门为分布式系统提供服务。它基于Raft共识算法，使用GOlang开发（这点很重要），由<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/CoreOS" title="CoreOS">CoreOS</a>开发。在github release上可以跟踪到最早发布在2013年8月12号，最近更新是在3天前，可以说是相当活跃了。</p>
<p>zookeeper，官方介绍是一个高可靠分布式<strong>协调</strong>服务。它提供配置维护、命名、分布式同步、分组服务（group services）等等功能。它起源于雅虎研究院的一个研究小组，后来成为hadoop的子项目，主要<strong>为Hadoop生态系统中一些列组件提供统一的分布式协作服务</strong>，再后来在（Hadoop 1.0时代）<strong>2011年1月</strong>， ZooKeeper 脱离Hadoop，成为Apache顶级项目，并成为开源项目，一直发展至今。它在官网上可找到最早的发布版本是2008年10月27好，github上最近的提交是4天前，且仅有少量提交，活跃对相对etcd较低。它基于基于 ZAB （Zookeeper Atomic Broadcast）协议实现，由java语言编写。</p>
<table>
<thead>
<tr>
<th>-</th>
<th>语言</th>
<th>能力</th>
<th>社区活跃度</th>
<th>其他</th>
</tr>
</thead>
<tbody><tr>
<td>zookeeper</td>
<td>java</td>
<td>配置维护、命名、分布式同步、分组服务</td>
<td>良</td>
<td>老牌分布式同步工具，kafka、dubbo、hadoop等都在用</td>
</tr>
<tr>
<td>etcd</td>
<td>GO</td>
<td>分布式键值存储、共享配置、服务发现</td>
<td>优</td>
<td>因支撑k8s而火</td>
</tr>
</tbody></table>
<h2 id="Raft-consensus-algorithm"><a href="#Raft-consensus-algorithm" class="headerlink" title="Raft consensus algorithm"></a>Raft consensus algorithm</h2><p>参考大神的动画： <a target="_blank" rel="noopener" href="http://thesecretlivesofdata.com/raft/">http://thesecretlivesofdata.com/raft/</a></p>
<p>raft其实是一个协议（protocol）。在这个协议当中，参与通信的结点有三种状态，leader、follower、candidate。在协议当中，有两种超时类型（timeout），election timeout，heartbeat timeout。leader 以 heartbeat timeout 为周期同步信息，follower 收到消息立即响应。同时存在多个节点进行leader选举时，先得到半数响应的节点成为leader。leader通过两阶段（预设、提交）同步数据，并且会记录log。</p>
<h2 id="ZAB（Zookeeper-Atomic-Broadcast）协议"><a href="#ZAB（Zookeeper-Atomic-Broadcast）协议" class="headerlink" title="ZAB（Zookeeper Atomic Broadcast）协议"></a>ZAB（Zookeeper Atomic Broadcast）协议</h2><p>选举通常是选zxid，sid（myid）最大的。新选举完毕会产生新的纪元，epoch，老leader恢复后其他节点也不听他管，毕竟前朝的剑不能斩本朝的官。</p>
<hr>
<p>Zookeeper的ZAB，Viewstamped Replication（VR），raft，multi-paxos，这些都可以被称之为Leader-based一致性协议。总的来说raft相对来说比较亲民好理解。</p>
<p>参考文章：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_38256474/article/details/90636262">[zookeeper] 00 - 初识：由来、版本、架构_神是念着倒-CSDN博客_zookeeper发展历史</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22115231/article/details/80784535">Zookeeper理解_老史的足迹-CSDN博客</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/36648084">raft算法与paxos算法相比有什么优势，使用场景有什么差异？ - 知乎 (zhihu.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/apache-zookeeper-vs-etcd3">https://dzone.com/articles/apache-zookeeper-vs-etcd3</a></li>
</ul>
</article><ul class="pager blog-pager"><li class="previous"><a href="/2022/04/28/C++%E6%8C%87%E9%92%88%E7%90%86%E8%A7%A3/" data-toggle="tooltip" data-placement="top" title="C++指针理解">上一篇</a></li><li class="next"><a href="/2022/04/05/python%20%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%B1%89%E5%AD%97%E8%AF%86%E5%88%AB/" data-toggle="tooltip" data-placement="top" title="python 实现图片汉字识别">下一篇</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a target="_blank" rel="noopener" href="https://github.com/donnieYeh" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="mailto:xr08255920@gmail.com" title="Email me"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-envelope"></i></span></a></li></ul><p class="copyright text-muted"><span>© 2022</span><span class="meta-devider">•</span><span class="with-love"><i class="fa fa-user"></i></span><span>yejf</span></p><p class="site_counter"><span class="theme-by text-muted">Theme base on
    <a target="_blank" rel="noopener" href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></span></p></div></div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script><script src="/js/main.js"></script><!-- 代码高亮--><!-- 导航栏搜索框--><script src="/js/search.js"></script><script type="text/javascript" id="local.search.active">var inputArea       = document.querySelector("#local-search-input");
inputArea.onclick   = function(){ getSearchFile(); this.onclick = null }
inputArea.onkeydown = function(){ if(event.keyCode == 13) return false }</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><!-- 切换标签彩蛋--><script src="/js/crash_cheat.js"> </script><!--看板娘--><script src="/live2d-widget/autoload.js"> </script></body></html>